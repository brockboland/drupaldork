<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../../misc/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="alternate" type="application/rss+xml" title="Drupal Dork RSS" href="../../rss.xml" />
  <title>Posts from August 2011 | Drupal Dork</title>
  <link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_pbm0lsQQJ7A7WCCIMgxLho6mI_kBNgznNUWmTWcnfoE.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_VPGZk7E9DmTpTZ-olsKmvUbPc-V3DOyRouMVA8jM4Jg.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_Wu8npAzy16WmnnnWKxpexfgsAryolGGaX6yO3GWA5bU.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_DA76D3kkHaT_VUm3Aj1Txz0yCM9z9qrYjWlPOR-gAwk.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_2THG1eGiBIizsWFeexsNe1iDifJ00QRS9uSd03rY9co.css" media="print" />

<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="http://drupaldork.com/themes/bartik/css/ie.css?mrsb48" media="all" />
<![endif]-->

<!--[if IE 6]>
<link type="text/css" rel="stylesheet" href="http://drupaldork.com/themes/bartik/css/ie6.css?mrsb48" media="all" />
<![endif]-->
  <script type="text/javascript" src="../../sites/default/files/js/js_xAPl0qIk9eowy_iS9tNkCWXLUVoat94SQT48UBCFkyQ.js"></script>
<script type="text/javascript" src="../../sites/default/files/js/js_lgAAOlplEun7p_8Pb-8dM079wtvnfwLZ0hAK0mH7Dto.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-248277-13"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"brocktik","theme_token":"miiElcILSqAs6MQjnmEwZhRvMOEz9W0DYO25pb4eqlY","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/contrib\/google_analytics\/googleanalytics.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/contrib\/date\/date_api\/date.css":1,"sites\/all\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/contrib\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"themes\/bartik\/css\/layout.css":1,"themes\/bartik\/css\/style.css":1,"themes\/bartik\/css\/colors.css":1,"themes\/bartik\/css\/print.css":1,"themes\/bartik\/css\/ie.css":1,"themes\/bartik\/css\/ie6.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-archive page-archive- page-archive-2011 page-archive- page-archive-08" >
  <div id="skip-link">
    <a href="08.html#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper"><div id="page">

  <div id="header" class="without-secondary-menu"><div class="section clearfix">

          <a href="../../index.html" title="Home" rel="home" id="logo">
        <img src="../../sites/all/themes/brocktik/logo.png" alt="Home" />
      </a>
    
          <div id="name-and-slogan">

                              <div id="site-name">
              <strong>
                <a href="../../index.html" title="Home" rel="home"><span>Drupal Dork</span></a>
              </strong>
            </div>
                  
                  <div id="site-slogan">
            Drupal: pretty great.          </div>
        
      </div> <!-- /#name-and-slogan -->
    
      <div class="region region-header">
    <div id="block-search-form" class="block block-search">

    
  <div class="content">
    <form action="08.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <h2 class="element-invisible">Search form</h2>
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-rnhn_KbCoq2iDeYo4lf-bfcFgAXODV4ok3ZmJ-eqlFs" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
</div>
  </div>

          <div id="main-menu" class="navigation">
        <h2 class="element-invisible">Main menu</h2><ul id="main-menu-links" class="links clearfix"><li class="menu-534 first"><a href="../../index.html" title="">Home</a></li>
<li class="menu-533"><a href="../../about.html" title="About">About</a></li>
<li class="menu-122 active-trail"><a href="../../archive.html" class="active-trail active">Archive</a></li>
<li class="menu-118 last"><a href="../../contact.html" title="">Contact</a></li>
</ul>      </div> <!-- /#main-menu -->
    
    
  </div></div> <!-- /.section, /#header -->

  
  
  <div id="main-wrapper" class="clearfix"><div id="main" class="clearfix">

          <div id="breadcrumb"><h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="../../index.html">Home</a> » <a href="../../archive.html">Post Archives</a> » <a href="../2011.html">Posts from 2011</a></div></div>
    
    
    <div id="content" class="column instapaper_body"><div class="messages warning">Heads up: this site is out of date. What you see here is simply a snapshot of DrupalDork.com from September 18, 2013, when I shut it down.</div><div class="section">
            <a id="main-content"></a>
                    <h1 class="title" id="page-title">
          Posts from August 2011        </h1>
                          <div class="tabs">
                  </div>
                          <div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div class="view view-post-archive view-id-post_archive view-display-id-page view-dom-id-f61b5af7f837805db41f4ea42467c4e5">
        
  
  
      <div class="view-content">
        <div class="views-row views-row-1 views-row-odd views-row-first views-row-last">
    <div id="node-29" class="node node-post node-promoted clearfix" about="/2011/08/mimicking-wordpress-press-bookmarklet-drupal-7" typeof="sioc:Item foaf:Document">

        <h2 property="dc:title" datatype="">
      <a href="../../2011/08/mimicking-wordpress-press-bookmarklet-drupal-7.html">Mimicking the WordPress &quot;Press This&quot; Bookmarklet in Drupal 7</a>
    </h2>
    
      <div class="meta submitted">
            <span property="dc:date dc:created" content="2011-08-21T18:39:18-04:00" datatype="xsd:dateTime" rel="sioc:has_creator">Submitted by <span class="username" xml:lang="" about="/users/brock" typeof="sioc:UserAccount" property="foaf:name" datatype="">Brock</span> on Sun 21 Aug 2011, 6:39 pm</span>    </div>
  
  <div class="content clearfix">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p><strong>Updated January 6, 2012:</strong> Since writing this post, I have wrapped this functionality up into the <a href="http://drupal.org/project/quickpost_bookmarklet">QuickPost Bookmarklet</a> module for Drupal 7.</p>
<hr /><p>There was only one thing I missed after switching from WordPress to Drupal: the "Press This" bookmarklet that's available on every WordPress site. I find that I post a lot less without it, just because it made it so simple to make a quick blog post about someting I had seen online: highlight some text, click the bookmarklet, add some comments, and post.</p>
<p>I've finally got around to replicating this in Drupal 7, using the <a href="http://drupal.org/project/prepopulate">Prepopulate module</a>, and I'm posting this so that others can make use of it. I'll start with the most basic version, then show you how I customized mine, and explain some gotchas to watch out for.</p>
<h2>What does it do?</h2>
<p>A bookmarklet is a bookmark in your browser's bookmark bar that has a <code>javascript:</code> URL instead of a regular one. When you click on the bookmarklet described in this post, a new window is opened to the admin page to create a new blog post on your site. The title of the post will be pre-filled with the title of the page you were viewing. If you select text on the page, this will be used for the body of your new post. Both of these can be changed, of course: they are just used as a starter so that you can quickly write a blog post about the page or article you were reading.</p>
<h2>The Basics</h2>
<p>First off, install the <a href="http://drupal.org/project/prepopulate">Prepopulate module</a> on your site. This post is about Drupal 7 - I'm using the 7.x-dev version and it's working well enough for my purposes.</p>
<p>In order to use the methods offered below, you'll need to create a bookmark and replace the URL with one of the codes below. If you're just skimming the text here and not reading the explanations, you'll probably run into problems because there are things you need to change (but then again, you probably won't read this sentence either).</p>
<h2>The Prepopulate version</h2>
<p>There's a section on bookmarklets in the <code>USAGE.txt</code> file that's included in the Prepopulate module. The module author offers this code:</p>
<p><code style="display:block">javascript:u=document.location.href;t=document.title;s=window.getSelection();void(window.open(%22http://example.com/node/add/content-web-link?edit[title]=%22+escape(t)+'&amp;edit[body_field][body]='+escape(s)+'&amp;edit[field_url][0][value]='+escape(u),'_blank','width=1024,height=500,status=yes,resizable=yes,scrollbars=yes'));</code></p>
<p><strong>To use this for your own site</strong>: you'll need to replace <code>example.com</code> with your own domain. You may also need to change <code>node/add/content-web-link</code>, replacing <code>content-web-link</code> with the name of your blog post content type.</p>
<p>I found that this version did not work for me: the name used for the body field (<code>edit[body_field][body]</code>) was not working on my site. I'm not sure, but this might be because I upgraded from Drupal 6. I had to use <code>edit[body][und][0][value]</code> instead, as you'll see below. If you use this version, you may need to make the same change.</p>
<h2>My version</h2>
<p>This is the URL I used for my Quick Post bookmarklet:</p>
<p><code style="display:block">javascript: var siteURL='www.drupaldork.com', nodeType='post', d=document, w=window, e=w.getSelection, k=d.getSelection, x=d.selection, s=(e?e():(k)?k():(x?x.createRange().text:0)), l=d.location, e=encodeURIComponent, url='http://'+siteURL+'/node/add/'+nodeType+'?edit[title]='+e(d.title); if(s) { s='&lt;blockquote&gt;'+s+'&lt;/blockquote&gt;'; s+='\n\nfrom &lt;a href="'+l+'"&gt;'+d.title+'&lt;/a&gt;'; url+='&amp;edit[body][und][0][value]='+e(s);} a=function(){if(!w.open(url,'quickpost','toolbar=0,resizable=1,scrollbars=1,status=1,width=1024,height=570')) l.href=url;}; if (/Firefox/.test(navigator.userAgent)) setTimeout(a, 0); else a();void(0)</code></p>
<p>I actually took the code that WordPress uses for the Press This bookmarklet and re-purposed it for use with the Prepopulate module, then made some tweaks of my own:</p>
<ul><li>Put the site URL and node type in variables at the very beginning, so that they're easier to change.</li>
<li>If any text on the page is selected, put it in a blockquote, and put a link back to the page at the bottom.</li>
</ul><p>As noted in the previous section, the default name for the body field in Prepopulate, <code>edit[body_field][body]</code>, did not work on my site, and I had to use <code>edit[body][und][0][value]</code>.</p>
<p><strong>To use this for your own site</strong>: Update the values of the <code>siteURL</code> and <code>nodeType</code> variables. You may also need to replace <code>edit[body][und][0][value]</code> with <code>edit[body_field][body]</code>. You can check this by selecting text on a page before clicking the bookmarklet: if the selected text does NOT appear in the body field, you probably need to use the other version.</p>
<h2>Expanded Javascript</h2>
<p>If you want to make some of your own customizations, here's the expanded version of the Javascript. Just make your changes, then remove all the comments and line breaks to make a minimized version that can be used for your bookmarklet.</p>
<p><code style="display:block">javascript:<br />
var siteURL='www.drupaldork.com',<br />
nodeType='post',<br />
d=document,<br />
w=window,<br />
e=w.getSelection,<br />
k=d.getSelection,<br />
x=d.selection,<br />
s=(e?e():(k)?k():(x?x.createRange().text:0)),<br />
l=d.location,<br />
// All text from the page needs to be encoded in the URL<br />
e=encodeURIComponent,<br />
url='http://'+siteURL+'/node/add/'+nodeType+'?edit[title]='+e(d.title);<br />
// If text was selected on the page, wrap it in a blockquote and add it to the URL<br />
if(s) {<br />
    s='&lt;blockquote&gt;'+s+'&lt;/blockquote&gt;';<br />
    s+='\n\nfrom &lt;a href="'+l+'"&gt;'+d.title+'&lt;/a&gt;';<br />
    url+='&amp;edit[body][und][0][value]='+e(s);<br />
}<br />
a=function(){<br />
    if(!w.open(url,'quickpost','toolbar=0,resizable=1,scrollbars=1,status=1,width=1024,height=570'))<br />
        l.href=url;<br />
};<br />
if (/Firefox/.test(navigator.userAgent))<br />
    setTimeout(a, 0);<br />
else<br />
    a();void(0)<br /></code></p>
</div></div></div><div class="field field-name-taxonomy-vocabulary-1 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Category: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="../../category/how.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">How-To</a></li></ul></div>  </div>

      <div class="link-wrapper">
      <ul class="links inline"><li class="comment-add first last"><a href="../../2011/08/mimicking-wordpress-press-bookmarklet-drupal-7.html#comment-form" title="Share your thoughts and opinions related to this posting.">Add new comment</a></li>
</ul>    </div>
  
  
</div>
  </div>
    </div>
  
  
  
  
  
  
</div>  </div>
</div>
  </div>
      
    </div></div> <!-- /.section, /#content -->

          <div id="sidebar-second" class="column sidebar"><div class="section">
          <div class="region region-sidebar-second">
    <div id="block-block-1" class="block block-block">

    <h2>My Main Site</h2>
  
  <div class="content">
    <p><a href="http://brockboland.com/">BrockBoland.com</a></p>
  </div>
</div>
<div id="block-block-8" class="block block-block">

    <h2>Hi!</h2>
  
  <div class="content">
    <p>I'm Brock Boland, and I like Drupal a little more than is socially acceptable.<br /></p><center><a href="../../about.html"><img src="../../sites/default/files/2012/05/smile-fence-150.jpg" width="150" height="150" alt="Bald Brock" title="Bald Brock" /></a></center>
  </div>
</div>
  </div>
      </div></div> <!-- /.section, /#sidebar-second -->
    
  </div></div> <!-- /#main, /#main-wrapper -->

  
  <div id="footer-wrapper"><div class="section">

    
          <div id="footer" class="clearfix">
          <div class="region region-footer">
    <div id="block-block-5" class="block block-block">

    
  <div class="content">
    <p>Content © 2009 - 2012 Brock Boland. Powered by <a href="http://drupal.org/">Drupal</a> because it's great. <a href="http://www.drupal.org" target="_blank">Drupal</a> is a registered trademark of <a href="http://buytaert.net/" target="_blank">Dries Buytaert</a>. The <a href="http://drupal.org/druplicon" target="_blank">Druplicon image</a> is licensed under the <a href="http://drupal.org/licensing/faq" target="_blank">GPL License</a>.</p>
  </div>
</div>
  </div>
      </div> <!-- /#footer -->
    
  </div></div> <!-- /.section, /#footer-wrapper -->

</div></div> <!-- /#page, /#page-wrapper -->
  </body>
</html>
